<!DOCTYPE html>
<html lang="en">
  <head>
    <!--# include file="/templates/header.html" -->
  </head>
  <body data-spy="scroll" data-target=".bs-sidebar" data-offset="0">
    <!--# include file="/templates/navbar.html" -->

    <div class="container manual">

      <div class="row">

        <div class="col-md-8" id="top" role="complementary">
          <h1>Concepts of Egison</h1>
        </div>

      </div>

      <div class="row">

        <div class="col-md-12" role="main">

          <h2 id="what-is-egison">What is Egison?</h2>

          <p>
            Egison is the world's first programming language that can directly represent pattern-matching against <i>unfree data types</i>.<br/>
            An unfree data type is a data types whose data have no standard form.<br/>
            For example, a type of sets is a unfree data type.<br/>
            This is because a collection <i>{a, b, c}</i> is equal with <i>{b, a, c}</i> and <i>{a, a, b, c}</i>, when we see them as sets.<br/>
            The pattern-matching of the existing programming languages only support data types whose data have a standard form, such as lists.<br/>
            Therefore, we need to translate and regard them as data which have a canonical form when we treat unfree data types.<br/>
            For example, a set would be always treated as a list.<br/>
            Many programmers think this is unavoidable, and in fact, it is a latent stress of programming.<br/>
            Egison gets rid of this restriction and makes programming dramatically simple!
          </p>

          <p>
            The following code is the shortest demonstration of Egison.<br/>
            You can edit and run following code.<br/>
          </p>

          <textarea id="egison-program1" name="code"></textarea>

          <button id="run-egison1" class="btn btn-lg btn-primary" data-loading-text="Loading..." role="button">Run</button>

          <pre id="egison-result1"></pre>
            

          <p>
            The following code is more interesting demonstration, pattern-matching against infinite lists.
          </p>
          
          <textarea id="egison-program2" name="code"></textarea>

          <button id="run-egison2" class="btn btn-lg btn-primary" data-loading-text="Loading..." role="button">Run</button>

          <pre id="egison-result2"></pre>
            
<h2 id="features">Four features of pattern-matching of Egison</h2>

          <p>
            To realize molularization of pattern-matching, I've designed pattern-matching system that has all following features.
          </p>
 
          <dl>
            <dt>Modularization of the way of pattern-matching</dt>
            <dd>
              We can define the way of pattern-matching for each data types.<br/>
              For example, we can define how to pattern-match against lists, multiset, and sets respectively.<br/>
            </dd>
            
            <dt>Multiple pattern-matching results</dt>
            <dd>
              We can handle pattern-matching that has multiple results with backtracking.<br/>
              This feature is necessary to pattern-match with unfree data types.<br/>
              Because unfree data have many forms for same data, so there are multiple ways of destruction.<br/>
            </dd>
            
            <dt>Non-linear patterns</dt>
            <dd>
              Bindings in a pattern can be refer in the same pattern.<br/>
              It is necessary to write useful patterns for unfree data types.<br/>
            </dd>
            
            <dt>Lexical scoping of patterns</dt>
            <dd>
              We can modularize usefule patterns with <i>pattern-functions</i>, functions that receive patterns and return a pattern.<br/>
              Since a pattern-function has lexical scoping, bindings for pattern-variables in the argument patterns and the body of pattern-functions don't conflict.<br/>
              Useful patterns can be reused in many places in a program without worry of name clash.<br/>
            </dd>
          </dl>

          <h2 id="next">What to do next...</h2>
          
          <p>
            <a class="btn btn-lg btn-primary" href="/demonstrations/poker-hands.html" role="button">View More Demonstrations</a>
          </p>

        </div>
        
      </div><!--/row-->
    
    </div><!-- /.container -->
    
    <!--# include file="/templates/footer.html" -->
    <script>
      var editor1;
      $.get("/api/source", { path: "sample/one-minute-first.egi"}, function(data) {
        var e = document.getElementById("egison-program1");
        e.value = data.content;
        editor1 = CodeMirror.fromTextArea(document.getElementById("egison-program1"), {
          matchBrackets: true,
          lineNumbers: true,
          viewportMargin: Infinity
        });
      }, "json");
      
      $(document).ready(function(){
        $('.btn').button()

        $('#run-egison1').click(function() {
          $('#run-egison1').prop("disabled", true);
          $('#run-egison1').html("Running...");
          $.post("/api/eval", { program: editor1.getValue() }, function(data) {
            data.output = data.output.replace(/</g, "&lt;");
            data.output = data.output.replace(/>/g, "&gt;");
            $('#egison-result1').html(data.output);
            $('#run-egison1').html("Run");
            $('#run-egison1').prop("disabled", false);
          }, "json");
        });
      });
      var editor2;
      $.get("/api/source", { path: "sample/one-minute-second.egi"}, function(data) {
        var e = document.getElementById("egison-program2");
        e.value = data.content;
        editor2 = CodeMirror.fromTextArea(document.getElementById("egison-program2"), {
          matchBrackets: true,
          lineNumbers: true,
          viewportMargin: Infinity
        });
      }, "json");
      
      $(document).ready(function(){
        $('.btn').button()

        $('#run-egison2').click(function() {
          $('#run-egison2').prop("disabled", true);
          $('#run-egison2').html("Running...");
          $.post("/api/eval", { program: editor2.getValue() }, function(data) {
            data.output = data.output.replace(/</g, "&lt;");
            data.output = data.output.replace(/>/g, "&gt;");
            $('#egison-result2').html(data.output);
            $('#run-egison2').html("Run");
            $('#run-egison2').prop("disabled", false);
          }, "json");
        });
      });
    </script>
  </body>
</html>
